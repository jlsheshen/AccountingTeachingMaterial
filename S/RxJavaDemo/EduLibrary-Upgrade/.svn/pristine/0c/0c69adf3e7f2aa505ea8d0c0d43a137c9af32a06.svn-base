author:lucher
date:2015-9-10
--------------------------
【重要声明：该库是在svn://192.168.1.169/android/lucher/EduLibrary的基础上升级而来
从29及以后功能点都是在该库上进行升级
2016-05-04】
该项目为爱丁公用library，为了提高开发效率，把一些通用的功能，算法，控件等代码整合到了一起。
对于该library所支持的功能会在此文档里进行说明，并且会提供一个使用该类库的例子EduLibraryDemo-Upgrade（同目录下）。
如果开发者在该项目里添加了相应的代码，请在此文档里进行说明，并且在EduLibraryDemo-Upgrade里加入使用示例。

*******************以下是功能说明区*********************
注：com.edu.library.util下的类为工具类，可根据类的头注释以及方法的注释获知其功能
对于values下的资源在该项目下都有定义，例如字体大小，颜色，样式等（不断更新），在开发项目的时候，应该优先使用本项目下的资源，
以达到项目风格一致的目的，同时也节省工作时间，对于开发者认为可以加入到该项目里的资源或代码，必须加上清晰的注释，有必要的需要
在该文档里进行说明


1.数据库操作（lucher-2015-9-10）
涉及该功能的类为com.edu.library.data下的：
BaseData.java BaseDataDao.java DBHelper.java
使用方法：通过继承BaseData，BaseDataDao来执行数据库具体操作
详细使用请参考EduLibraryDemo-Upgrade中首页里list使用的各功能项，数据便是通过此模块进行的。

2.爱丁定制ArrayAdapter（lucher-2015-9-11）
用于简单的只显示文字的list，涉及该功能的类为
com.edu.library.adapter.EduArrayAdapter.java,com.edu.library.data.BaseListItemData.java
使用的数据源实体必须为BaseListItemData的子类，用EduArrayAdapter作为adapter
使用的布局资源需要自己传递（在该项目中预置了edu_list_item.xml），如果没有特殊要求可使用该布局文件
在onItemClick的时候，可以通过view的getTag获取到与item绑定的数据实体
详细使用请参考EduLibraryDemo-Upgrade首页中的list的实现。

3.活跃度统计功能（lucher-2015-9-11）
需要加入活跃度统计的应用，通过继承EduBaseActivity.java，EduBaseFragmentActivity.java,
EduGuidanceActivity.java,EduBaseFragmentPagerActivity来实现
功能和使用见具体的类注释及demo使用。

4.未捕获异常处理（lucher-2015-9-11）
对应的类为com.edu.library.EduCrashApplication.java
若需要使用该功能，需要让对应工程的Application继承该Application
对于应用中未捕获的异常会统一进行处理，弹出toast“很抱歉,程序出现异常,即将退出,请与管理员联系！”
并且把相应的错误日志按小时记录到Android/edu/log/下
需要加入权限：
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

5.应用首次启动时显示指导页控件（lucher-2015-9-11）
activity需要继承com.edu.library.EduGuidanceActivity.java
并且在initGuidanceView()方法里初始化guidanceView控件

6.应用每次启动时显示欢迎页控件（lucher-2015-9-11）
activity需要继承com.edu.library.EduGuidanceActivity.java
并且在initWelcomeView()方法里初始化welcomeView控件

7.发送成绩功能（lucher-2015-9-11 edited by edu_lx 20151020）
可发送到平板接受端和发送到服务器端
对应的帮助类为：com.edu.library.common.SendScoreHelper
注：需要在manifest里注册以下service以及相关权限
 <!-- 发送成绩相关 start -->
    <service
        android:name="com.edu.library.wifiscore.WifiSendScoreService"
        android:enabled="true" />
 <!-- 发送成绩相关 end -->
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />

发送到服务器端对应的实体为	
com.edu.library.net.SendSocreEntity;
使用者只需将SendSocreEntity中的固定字段testContent内容项赋值(此内容为测试的具体题目)；以及根据不同应用中不非固定项目
将非固定项目组成一个{key,value}的json串赋值给SendSocreEntity中的extendJSON即可
详细使用请参考EduLibraryDemo-Upgrade中的发送成绩示例

8.gif动画（lucher-2015-9-14）
对应的类为：com.edu.library.view.GifMovieView.java
详细使用请参考EduLibraryDemo-Upgrade中相关示例。

9.输入法设置（lucher-2015-9-15）
对应的类为：com.edu.library.common.EduImeHelper.java
详细使用请参考EduLibraryDemo-Upgrade中相关示例。

10.3D旋转动画（lucher-2015-9-15）
对应的类为：com.edu.library.common.Rotate3dAnimation.java
详细使用请参考EduLibraryDemo-Upgrade中相关示例。

11.计时器功能（lucher-2015-9-15）
计时器基类为：com.edu.library.timer.EduBaseTimer.java
如果需要扩展计时器则可通过继承该类来实现
目前该库里提供了四种类型的计时器：DoubleTimer，DynamicTimeTimer，ProgressBarTimer，TotalTimeTimer
具体介绍请查看注释，若这四种计时器无法满足需求，则需要自己扩展
计时器使用方法请参考EduLibraryDemo-Upgrade中相关示例。

13.属性动画类（lucher-2015-9-16）
对应的类为：com.edu.library.common.EduAnimation.java
详细使用请参考EduLibraryDemo-Upgrade中相关示例。

12.随机工具类（lucher-2015-9-16）
对应的类为：com.edu.library.util.RandomUtil.java
提供的方法请查看RandomUtil里面每个方法的注释
该类的使用不在EduLibraryDemo-Upgrade中提供演示

13.播放器（lucher-2015-9-17）
对应的包为：com.edu.library.player
详细使用请参考EduLibraryDemo-Upgrade中相关示例。

14.Http网络操作库（lucher-2015-9-30）,修改（lucher-2016-05-12）
对应jar包为：lucher-http-network-vx.x.x.jar
关联jar包：android-async-http-1.4.9.jar,fastjson-1.1.31.jar,httpclient-4.3.6.jar
需要加入权限：
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
详细使用请参考EduLibraryDemo-Upgrade中相关示例。
备注：
apache相关jar包：http://hc.apache.org/downloads.cgi
网络请求使用了开源库：Android-Async-Http
地址：https://github.com/loopj/android-async-http
文章推荐：
http://www.cnblogs.com/angeldevil/p/3729808.html
http://www.cnblogs.com/manuosex/p/3583775.html

15.加入统计图公用库（lucher-2015-11-10）
对应的jar包为：achartengine-1.1.0.jar，来自于开源项目https://code.google.com/p/achartengine/
对应的包为：com.edu.library.chart
目前提供：饼图，条形图，折线图示例
建议在实际应用中，仿照对应的ChartBuilder编写自己的ChartBuilder类，因为定制的参数较多，无法完全满足实际需求

16.加入含有图片的html解析的帮助类（lucher-2015-11-13)
对应的包为：com.edu.library.html
设计支持保存在res，assets，本地，以及从网络获取的图片的解析
目前实现了保存在res里的图片的解析情况
注意：本地图片标签的图片名称需要按照一定的规则录入，否则无法解析
可支持一行显示一张或多张图片的情形
对于一张图片的情况：图片会居中显示到容器中，如果图片宽度大于容器宽度将被缩小显示（建议图片的宽度不要大于容器宽度）
对于多张图片的情况：图片会等间距显示到容器中（要求同行显示的图片大小相差不大，否则会影响间距），如果图片过大会被缩小显示（建议图片的宽度不要大于容器宽度/n）
图片命名规则说明：
图片的命名表达式为：type:n['m]_name.{png/jpg}，表达式中的符号均为英文半角字符
type表示图片的保存位置，目前支持："res:","assets:","file:"；
n表示该行的第几张图片，若该行只有一张图片则为0，否则为正数；
'm表示该行图片的总数，若该行只有一张图片则不需要加该标识，m>=n；
name表示图片的名字，与提供的图片名称完全相同；
{png/jpg}表示目前支持png和jpg图片格式；
图片命名举例说明：
<img src=\"res:0_img01.png\"/> 表示该图片位于res下，该行只有一张图片，且图片名称为img01.png
<img src=\"res:1'4_img02.png\"/> 标识该图片位于res下，该行一共有4张图片，该图片为第一张，且图片名称为img02.png，注：多张图片不支持乱序排放
使用方法请参考EduLibraryDemo-Upgrade中相关示例。
单张图片居中算法忽略，对于多张图片布局的算法见/doc/html图片解析_一行多张图片布局算法.jpg

17.加入一键注册信息获取帮助类（lucher-2015-11-17）
对应的包为：com.edu.library.superonekey
注意：对于省份，城市，专业名大类信息，在一键注册V1.2.5及以后版本才提供
详细使用请参考EduLibraryDemo-Upgrade中相关示例。

18.加入断点续传下载文件功能（lucher-2015-11-23）
对应的jar包为：afinal_0.5.1_bin.jar
详细使用请参考EduLibraryDemo-Upgrade中相关示例。
需要下列权限
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
备注：
afinal_0.5.1_bin.jar为开源项目：https://github.com/yangfuhai/afinal


19.图片选择和显示控件（lucher-2015-11-28）（功能升级：lucher-2016-05-13）
包含显示图片的表格，添加图片的选择器，以及点击图片可滑动查看大图功能
图片显示表格：对应的包：com.edu.library.picgrid
图片选择器：对应的包：com.edu.library.picselect,com.edu.library.picselect.activity
图片缩放：com.edu.library.loadingimage.ZoomableLoadingImageView
依赖jar包：photoview_160513.jar
依赖功能点14，所需注意事项及权限参考功能点14
可支持按图片文件夹分类，直接显示所有图片
选择本地图片，需加入activity:
<activity android:name="com.edu.library.picselect.activity.ImageListActivity" >
    <intent-filter>
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>
查看大图，需要加入activity：
<activity android:name="com.edu.library.picgrid.PicBrowseActivity" >
    <intent-filter>
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>
使用详情见示例工程EduLibraryDemo-Upgrade
备注：
图片选择功能，在开源项目基础上修改而来：http://likebamboo.com/android/2014/04/28/image_chooser/
图片缩放功能，使用开源库PhotoView:https://github.com/chrisbanes/PhotoView
表格图片适配是个麻烦的问题，个人总结，目前有两种方式
1.需要指定图片的宽度，然后多余的空间每个单元格平均分配，对于不同分辨率可以分别指定不同宽度值
目前demo里也是使用了这种方法，参考资料：Android实现自适应正方形GridView
http://blog.csdn.net/jdsjlzx/article/details/45049627
http://yunfeng.sinaapp.com/?p=465&utm_source=tuicool&utm_medium=referral&utm_source=tuicool&utm_medium=referral
2.需要指定列数，可以获取屏幕宽度，然后根据间距等值计算出每个单元格的宽度，在adapter里通过布局参数设置每个单元格的宽和高
（之前版本就是使用的这种方式）



20.自定义下拉菜单（lucher-2015-12-7）
对应的包为：com.edu.lib.dropdownmenu
详细使用请参考EduLibraryDemo-Upgrade中相关示例。


21.文件选择器（lucher-2015-12-8）
经github-afilechooser修改而来
对应的包为：com.edu.library.filechooser
需注册activity:
<activity
    android:name="com.edu.library.picselect.activity.ImageListActivity"  >
    <intent-filter>
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>
使用详情见示例工程EduLibraryDemo-Upgrade


22.滑动选择控件（lucher-2015-12-9）
目前有两个控件可供选择，均经开源项目修改而来
对应的包为：com.edu.library.wheelview
		 com.edu.library.wheelview2
这两种控件用法差不多，各有优缺点，如果不需要让当前选项与其他选项的颜色或字体等有区别，则两者皆可
如果当前项和其他项有区别，使用com.edu.library.wheelview2效果不是很好，需要等滚动停止后当前项才发生改变，而
com.edu.library.wheelview在滚动的时候就可以让当前项发生改变，但是执行效率比前者低，前者是在控件里添加了对当前项
的字体和颜色属性来实现，而后者是通过for循环取出每一项后进行动态设置的，所以效率较低
所以可以根据实际情况进行选择使用。
使用详情见示例工程EduLibraryDemo-Upgrade

23.shape的使用
shape对应的文件在/res/drawable/下，以shape_开头
使用方法见/doc/Shape的使用.txt
注：在使用虚线的时候，对应4.0以上版本，需要加入：android:layerType="software"或者line.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
才会生效
使用详情见示例工程EduLibraryDemo-Upgrade

24.录音和播放工具类
对应的类为：
com.edu.library.common.SoundRecorder.java
com.edu.library.common.SoundPlayer.java
需要加入权限：
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
使用详情见示例工程EduLibraryDemo-Upgrade

25.简单的自定义控件
对应的类为：com.edu.library.view.ClickableLayout.java
该类依赖于/values/attrs.xml/ClickableLayout
使用详情见示例工程EduLibraryDemo-Upgrade

26.数据库文件版本更新工具（lucher-2016-03-11）
对应的类为：com.edu.library.util.DBCopyUtil.java
该工具的作用：
【检查数据库版本，先判断数据库是否存在，不存在则直接从assets里拷贝过去
如果存在，则判断assets里的数据库与当前数据库版本是否一致，不一致则替换过去，一致则不做处理】
如果要实现数据库版本更新功能，必须在数据库里加入TB_DB_VERSION表，建表语句见doc/TB_DB_VERSION.sql
通过使用下面方法实现数据库自动升级：
public void checkDBVersion(String fileName)
使用详情见示例工程EduLibraryDemo-Upgrade

27.apk版本升级工具（lucher-2016-03-15）
对应的包为：com.edu.library.upgrade
主要对应的类为：
1.ApkUpgradeManager - 用于webservice
2.ApkUpgradeManager2 - 用于http
工具1的作用：检测apk是否有新版本，如果有则提示用户下载安装（如果需要上传新版本，使用爱丁云服务器进行推送 http://cloud.edusoft.cc:8080/jsp/login.jsp）
使用示例如下：
  ApkUpgradeManager upgradeManager = ApkUpgradeManager.getSingleton(mContext, GuideCacheManager.getTempFileCacheDir(), R.drawable.app_icon);
  upgradeManager.checkNewVersion(ApkUpgradeManager.DEFAULT_USER_ID);
注：使用该工具需要在对应工程的Manifest中加入如下服务：
<service android:name="com.edu.library.upgrade.DownLoadService" />
需要使用以下权限：
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
工具2的作用，可以自定义服务器地址进行版本检测升级，服务器端需要按照对应的接口参数实现，使用方法与1类似

28.二维码扫描和生成示例（lucher-2016-04-21）
对应的jar包为：zxing.jar，zxing-use-lucher.jar（官方介绍：https://github.com/zxing/zxing）
对应的类为：com.zxing.activity.CaptureActivity.java（该类不能变动，否则会出错）
如果需要扫描功能需使用以下权限：
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />
<uses-permission android:name="android.permission.FLASHLIGHT" />
如果需要扫描功能需注册activity:
<!-- 扫描二维码 start -->
<activity
    android:name="com.zxing.activity.CaptureActivity"
    android:configChanges="keyboard|keyboardHidden|screenSize|orientation|navigation"
    android:label="@string/app_name" >
    <intent-filter>
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>
<!-- 扫描二维码 end -->
使用详情见示例工程EduLibraryDemo-Upgrade

--------------------
29.图片瀑布流控件（lucher-2016-05-03）
关联jar包：android-support-v7-recyclerview.jar
对应的包为：com.edu.library.masonry
依赖功能点14，所需注意事项及权限参考功能点14
使用详情见示例工程EduLibraryDemo-Upgrade
如果出现android.view.InflateException: Binary XML file line #11: Error inflating class android.support.v7.widget.RecyclerView
类似错误，原因可能很多，比较奇葩的两个问题：
1.android-support-v7-recyclerview.jar与android-support-v4.jar版本需保持一致，见：https://techoslovakia.wordpress.com/2015/02/10/recyclerview-error/
2.android:targetSdkVersion="21"

---------------------
30.支持上拉加载下拉刷新控件（lucher-2016-05-16）
对应的包为：com.edu.library.pullrefresh
使用方法如下：
<com.edu.library.pullrefresh.PullToRefreshLayout
    android:id="@+id/refresh_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <include layout="@layout/refresh_head" />

    <com.edu.library.pullrefresh.PullableTextView
        android:id="@+id/content_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/black"
        android:gravity="center"
        android:text="这是一个match_parent的TextView"
        android:textColor="@color/white"
        android:textSize="@dimen/txt_size_half_large"
        android:textStyle="bold" />

    <include layout="@layout/load_more" />
</com.edu.library.pullrefresh.PullToRefreshLayout>

refreshLayout.setOnRefreshListener(this);
@Override
public void onRefresh(PullToRefreshLayout pullToRefreshLayout) {
	refreshLayout.loadmoreFinish(PullToRefreshLayout.SUCCEED);
}

@Override
public void onLoadMore(PullToRefreshLayout pullToRefreshLayout) {
	refreshLayout.refreshFinish(PullToRefreshLayout.SUCCEED);
}
使用详情见示例工程EduLibraryDemo-Upgrade
备注：https://github.com/jingchenUSTC/PullToRefreshAndLoad


---------
31.加入用户中心使用帮助类（lucher-2016-07-11）
对应的包为：com.edu.library.usercenter
使用详情见示例工程EduLibraryDemo-Upgrade
如果使用卸载app，切换输入法功能需使用以下权限：
<uses-permission android:name="com.edu.permission.USER_CENTER_RECEIVER" />
如果使用获取用户信息，服务信息功能需使用以下权限：
<uses-permission android:name="com.edu.permission.USER_CENTER_PROVIDER" />

---------
32.加入用户行为数据收集功能（lucher-2016-07-14）
对应的包为：com.edu.library.behavior
使用方法：
在Application的onCreate方法里加入：
registerActivityLifecycleCallbacks(new UserBehaviorCollecter());
即可
需使用以下权限：
<uses-permission android:name="com.edu.permission.USER_CENTER_PROVIDER" />

---------
33.加入应用授权激活功能（lucher-2016-07-21）
对应的包为：com.edu.library.authorize
使用方法：
在MainActivity的setContentView之前调用：
if(!ApkAuthUtil.checkAuth(mContext)) {
	return;
}
